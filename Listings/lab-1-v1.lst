A51 MACRO ASSEMBLER  LAB_1_V1                                                             09/19/2023 19:30:00 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\lab-1-v1.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE lab-1-v1.a51 SET(SMALL) DEBUG PRINT(.\Listings\lab-1-v1.lst) OBJECT(.\O
                      bjects\lab-1-v1.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; Start
0000                   2             ORG     0000h                   ; (Starting address)
  00C0                 3             P4              EQU 0C0h
                       4     
                       5     
                       6     ; Writing a reference function to external memory
0000 74E3              7             MOV     A, #0E3h                ; A := 11100011b (The first part of the reference f
                             unction)
0002 908000            8             MOV     DPTR, #8000h    ; DPTR := 8000h
0005 F0                9             MOVX    @DPTR, A                ; [DPTR] := A
0006 74C5             10             MOV     A, #0C5h                ; A := 11000101b (The second part of the reference 
                             function)
0008 908001           11             MOV     DPTR, #8001h    ; DPTR := 8001h
000B F0               12             MOVX    @DPTR, A                ; [DPTR] := A
                      13     
                      14     
                      15     ; Waiting for permission to start program execution
000C C2C0             16             CLR             P4.0                    ; P4.0 := 0
000E 30C0FD           17             JNB     P4.0, $                 ; if P4.0 == 0 then PC := PC
0011 E4               18             CLR             A                               ; A := 0
                      19     
                      20     
                      21     ; Iterating through all input values
0012                  22     CYCLE_1:
0012 F520             23             MOV             20h, A                  ; [20h] := A (Loading input values)
                      24             
                      25     ; Calculation of a logical function
0014 A201             26             MOV             C, 1                    ; C := [20.1h]
0016 B002             27             ANL             C, /2                   ; C := C and ![20.2h]
0018 B003             28             ANL             C, /3                   ; C := C and ![20.3h]
001A 9204             29             MOV             4, C                    ; [20.4h] := C (x1 * !x2 * !x3)
001C A202             30             MOV             C, 2                    ; C := [20.2h]
001E B000             31             ANL             C, /0                   ; C := C and ![20.0h]
0020 B001             32             ANL             C, /1                   ; C := C and ![20.1h]
0022 9205             33             MOV             5, C                    ; [20.5h] := C (x2 * !x0 * !x1)
0024 A202             34             MOV             C, 2                    ; C := [20.2h]
0026 B001             35             ANL             C, /1                   ; C := C and ![20.1h]
0028 8203             36             ANL             C, 3                    ; C := C and [20.3h]
002A 9206             37             MOV             6, C                    ; [20.6h] := C (x2 * !x1 * x3)
002C A200             38             MOV             C, 0                    ; C := [20.0h]
002E B002             39             ANL             C, /2                   ; C := C and ![20.2h]
0030 8203             40             ANL             C, 3                    ; C := C and [20.3h] (x0 * !x2 * x3)
0032 7204             41             ORL             C, 4                    ; C := C or [20.4h]
0034 7205             42             ORL             C, 5                    ; C := C or [20.5h]
0036 7206             43             ORL             C, 6                    ; C := C or [20.6h]
0038 9200             44             MOV             0, C                    ; [20.0h] := F
                      45     
                      46     ; Comparison of the obtained result with the reference function
003A F8               47             MOV             R0, A                   ; R0 := A (Preparing the shift counter)
003B F9               48             MOV             R1, A                   ; R0 := A (Saving current input values)
003C 200305           49             JB              3, PTR_1                ; if [20.3h] == 1 then PC := ${PTR_1}
003F 908000           50             MOV             DPTR, #8000h    ; DPTR := 8000h (The first half of the values of th
                             e reference function)
0042 0147             51             AJMP    PTR_2                   ; PC := ${PTR_2}
0044                  52     PTR_1:
0044 908001           53             MOV             DPTR, #8001h    ; DPTR := 8001h (The second half of the values of t
                             he reference function)
A51 MACRO ASSEMBLER  LAB_1_V1                                                             09/19/2023 19:30:00 PAGE     2

0047                  54     PTR_2:
0047 E0               55             MOVX    A, @DPTR                ; A := [DPTR] (Loading the required part of the ref
                             erence function)
0048                  56     CYCLE_2:                                        ; Shift cycle
0048 B80002           57             CJNE    R0, #0, PTR_3   ; if R0 != 0 then PC := ${PTR_4}
004B 0151             58             AJMP    PTR_4                   ; PC := ${PTR_5}
004D                  59     PTR_3:
004D 03               60             RR              A                               ; A -> (Right shift)
004E 18               61             DEC             R0                              ; R0 := R0 - 1
004F 0148             62             AJMP    CYCLE_2                 ; PC := ${CYCLE_2}
0051                  63     PTR_4:
0051 6220             64             XRL             20h, A                  ; [20h] := [20h] xor A
0053 E9               65             MOV             A, R1                   ; A := R1 (Return saved input values)
0054 A200             66             MOV             C, 0                    ; C := [20.0h] (Check bit)
0056 B40F02           67             CJNE    A, #0Fh, PTR_5  ; if A != 0Fh then PC := ${PTR_6}
0059 0159             68             AJMP    $                               ; PC := PC (End of programme)
005B                  69     PTR_5:
005B 04               70             INC             A                               ; A := A + 1 (Next input value)
005C 0112             71             AJMP    CYCLE_1                 ; PC := ${CYCLE_1}
                      72             END                                             ; (End of the program text)
A51 MACRO ASSEMBLER  LAB_1_V1                                                             09/19/2023 19:30:00 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

CYCLE_1. . . . . .  C ADDR   0012H   A   
CYCLE_2. . . . . .  C ADDR   0048H   A   
P4 . . . . . . . .  N NUMB   00C0H   A   
PTR_1. . . . . . .  C ADDR   0044H   A   
PTR_2. . . . . . .  C ADDR   0047H   A   
PTR_3. . . . . . .  C ADDR   004DH   A   
PTR_4. . . . . . .  C ADDR   0051H   A   
PTR_5. . . . . . .  C ADDR   005BH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
